--Passo a passo
-- 1. Planejar os dados e as tabelas
-- 2. Criar o db
-- 3. Criar as queries das tabelas
-- 4. Criar as sequencias de incremento das PKs
--nome database LOJA

----------------------------------------------
--tabelas

-- *PRODUTO(ID, NOME, MARCA, PRECO)
-- *VENDEDOR(ID, NOME, CPF, SEXO)
-- *CLIENTE(ID, NOME, CPF, SEXO)
-- *ENDERECO_CLIENTE(ID, ID_CLIENTE, CEP, LOGRADOURO)
-- *ENDERECO_VENDEDOR(ID, ID_VENDEDOR, CEP, LOGRADOURO)
-- *CONTATO_CLIENTE(ID, ID_CLIENTE, TELEFONE, EMAIL)
-- *CONTATO_VENDEDOR(ID, ID_VENDEDOR, TELEFONE, EMAIL)
-- *VENDA(ID, ID_PRODUTO, ID_CLIENTE, ID_VENDEDOR, QUANTIDADE)

----------------------------------------------
--queries para criar as tabelas

--criando database
	CREATE DATABASE LOJA;

--criando tabela produto
	CREATE TABLE PRODUTO (
			ID INT PRIMARY KEY NOT NULL,
			NOME VARCHAR2(255) NOT NULL,
			MARCA VARCHAR2(255) NOT NULL,
			PRECO NUMBER NOT NULL
		);

--criando tabela vendedor
	CREATE TABLE VENDEDOR (
			ID INT PRIMARY KEY NOT NULL,
			NOME VARCHAR2(255) NOT NULL,
			CPF CHAR(11) UNIQUE NOT NULL,
			SEXO CHAR(1) NOT NULL
		);

--criando tabela cliente
	CREATE TABLE CLIENTE (
			ID INT PRIMARY KEY NOT NULL,
			NOME VARCHAR2(255) NOT NULL,
			CPF CHAR(11) UNIQUE NOT NULL,
			SEXO CHAR(1) NOT NULL
		);

--criando tabela endereco de cliente
	CREATE TABLE ENDERECO_CLIENTE(
			ID INT PRIMARY KEY NOT NULL,
			ID_CLIENTE INT UNIQUE NOT NULL,
			CEP CHAR(8) NOT NULL,
			LOGRADOURO VARCHAR2(255) NOT NULL,
			CONSTRAINT FK_ID_CLIENTE_ENDERECO 
				FOREIGN KEY (ID_CLIENTE) 
				REFERENCES CLIENTE(ID)
		);

--criando tabela de contato dos clientes
	CREATE TABLE CONTATO_CLIENTE(
			ID INT PRIMARY KEY NOT NULL,
			ID_CLIENTE INT UNIQUE NOT NULL,
			TELEFONE VARCHAR2(255) NOT NULL,
			EMAIL VARCHAR2(255) UNIQUE NOT NULL,
			CONSTRAINT FK_ID_CLIENTE_CONTATO
				FOREIGN KEY(ID_CLIENTE)
				REFERENCES CLIENTE(ID) 
		);

--criando tabela de endereco do vendedor
	CREATE TABLE ENDERECO_VENDEDOR(
			ID INT PRIMARY KEY NOT NULL,
			ID_VENDEDOR INT UNIQUE NOT NULL,
			CEP CHAR(8) NOT NULL,
			LOGRADOURO VARCHAR2(255) NOT NULL,
			CONSTRAINT FK_ID_VENDEDOR_ENDERECO
				FOREIGN KEY (ID_VENDEDOR)
				REFERENCES VENDEDOR(ID)
		);

--criando tabela de contato do vendedor
	CREATE TABLE CONTATO_VENDEDOR (
			ID INT PRIMARY KEY NOT NULL,
			ID_VENDEDOR INT UNIQUE NOT NULL,
			TELEFONE VARCHAR2(255) NOT NULL,
			EMAIL VARCHAR2(255) UNIQUE NOT NULL,
			CONSTRAINT FK_ID_VENDEDOR_CONTATO 
				FOREIGN KEY (ID_VENDEDOR) 
				REFERENCES VENDEDOR(ID)
		);

--criando tabela de vendas
	CREATE TABLE VENDA(
			ID INT PRIMARY KEY NOT NULL,
			ID_PRODUTO INT NOT NULL,
			ID_CLIENTE INT NOT NULL,
			ID_VENDEDOR INT NOT NULL,
			QUANTIDADE INT DEFAULT 0 NOT NULL,
			CONSTRAINT FK_ID_PRODUTO_VENDA
				FOREIGN KEY (ID_PRODUTO)
				REFERENCES PRODUTO(ID),
			CONSTRAINT FK_ID_CLIENTE_VENDA
				FOREIGN KEY (ID_CLIENTE)
				REFERENCES CLIENTE(ID),
			CONSTRAINT FK_ID_VENDEDOR_VENDA
				FOREIGN KEY (ID_VENDEDOR)
				REFERENCES VENDEDOR(ID)
		);

----------------------------------------------
--queries para criar as sequencias das PKs

	CREATE SEQUENCE VENDEDOR_SEQ
		START WITH 1
		INCREMENT BY 1
		NOCYCLE;

	CREATE SEQUENCE PRODUTO_SEQ
		START WITH 1
		INCREMENT BY 1
		NOCYCLE;

	CREATE SEQUENCE CLIENTE_SEQ
		START WITH 1
		INCREMENT BY 1
		NOCYCLE;

	CREATE SEQUENCE VENDA_SEQ
		START WITH 1
		INCREMENT BY 1
		NOCYCLE;

	CREATE SEQUENCE ENDERECO_VENDEDOR_SEQ
		START WITH 1
		INCREMENT BY 1
		NOCYCLE;

	CREATE SEQUENCE ENDERECO_CLIENTE_SEQ
		START WITH 1
		INCREMENT BY 1
		NOCYCLE;

	CREATE SEQUENCE CONTATO_VENDEDOR_SEQ
		START WITH 1
		INCREMENT BY 1
		NOCYCLE;

	CREATE SEQUENCE CONTATO_CLIENTE_SEQ
		START WITH 1
		INCREMENT BY 1
		NOCYCLE;

----------------------------------------------
--Populacao das tabelas

	
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'SKATE - LONG - HELLRAISER', 'STEEL EAGLE', 650.0);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'SKATE - LONG - STREET MASTER', 'MOUNTAIN MASTER', 450.0);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'BARRACA INVERNO PATAGONIA', '360STORE', 3950.0);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'BARRACA VERAO KNOA', '360STORE', 590.0);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'CAMISETA TREKKING INVERNO', '360STORE', 110.0);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'LUVA ESCALADA', 'PUNHO FORTE', 79.90);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'BOTA NEVE BEHEMOTH', 'FROST STORE', 330.50);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'BOTA TREKKING PAMPEIRA', 'BAGE AVENTURA', 90.0);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'BARRA CEREAL PROTAIN', 'MOROMBA STORE', 2.9);
	INSERT INTO PRODUTO 
			(ID, NOME, MARCA, PRECO)
		VALUES
			(PRODUTO_SEQ.NEXTVAL, 'MOUNTAIN BIKE XP', 'MADBOARD', 8990.0);